/**
 * hashgrid (jQuery version)
 * http://github.com/dotjay/hashgrid
 * Version 6, 10 Jun 2011
 * Written by Jon Gibbins at Analog, http://analog.coop/
 *
 * Contibutors:
 * Sean Coates, http://seancoates.com/
 * Phil Dokas, http://jetless.org/
 * Andrew Jaswa, http://andrewjaswa.com/
 *//**
 * @license Copyright 2011 Analog Coop Limited
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * Usage
 *
 * // The basic #grid setup looks like this
 * var grid = new hashgrid();
 *
 * // Or you can set a custom id for your grid, e.g. #mygrid
 * var grid = new hashgrid("mygrid");
 *
 * // But there are a whole bunch of additional options you can set
 * var grid = new hashgrid({
 *     id: 'mygrid',            // id for the grid container
 *     modifierKey: 'alt',      // optional 'ctrl', 'alt' or 'shift'
 *     showGridKey: 's',        // key to show the grid
 *     holdGridKey: 'enter',    // key to hold the grid in place
 *     foregroundKey: 'f',      // key to toggle foreground/background
 *     jumpGridsKey: 'd',       // key to cycle through the grid classes
 *     numberOfGrids: 2,        // number of grid classes used
 *     classPrefix: 'class',    // prefix for the grid classes
 *     cookiePrefix: 'mygrid'   // prefix for the cookie name
 * });
 *//**
 * Make sure we have the library
 * TODO: Use an adapter
 */typeof jQuery=="undefined"&&alert("Hashgrid: jQuery not loaded. Make sure it's linked to your pages.");var hashgrid=function(e){function S(e){if(t.modifierKey==null)return!0;var n=!0;switch(t.modifierKey){case"ctrl":n=e.ctrlKey?e.ctrlKey:!1;break;case"alt":n=e.altKey?e.altKey:!1;break;case"shift":n=e.shiftKey?e.shiftKey:!1}return n}function x(e){var t=!1,n=e.keyCode?e.keyCode:e.which;n==13?t="enter":t=String.fromCharCode(n).toLowerCase();return t}function T(){L(t.cookiePrefix+t.id,(w?"1":"0")+"-"+d+"-"+n,1)}function N(){f.show();p.css({width:f.width()});p.children(".vert").each(function(){var e=$(this);e.css("display","inline-block");e.offset().top>e.parent().offset().top&&e.hide()})}function C(e){var r,i,s=e.target.tagName.toLowerCase();if(s=="input"||s=="textarea"||s=="select")return!0;i=S(e);if(!i)return!0;r=x(e);if(!r)return!0;switch(r){case t.showGridKey:if(!h){N();h=!0}else if(w){f.hide();h=!1;w=!1;T()}break;case t.holdGridKey:if(h&&!w){w=!0;T()}break;case t.foregroundKey:if(h){if(f.css("z-index")==m){f.css("z-index",v);d="B"}else{f.css("z-index",m);d="F"}T()}break;case t.jumpGridsKey:if(h&&t.numberOfGrids>1){f.removeClass(t.classPrefix+n);n++;n>t.numberOfGrids&&(n=1);f.addClass(t.classPrefix+n);N();/webkit/.test(navigator.userAgent.toLowerCase())&&M();T()}}return!0}function k(e){var n,r=S(e);if(!r)return!0;n=x(e);if(n&&n==t.showGridKey&&!w){f.hide();h=!1}return!0}function L(e,t,n){var r,i="";if(n){r=new Date;r.setTime(r.getTime()+n*24*60*60*1e3);i="; expires="+r.toGMTString()}document.cookie=e+"="+t+i+"; path=/"}function A(e){var t,n=document.cookie.split(";"),r=0,i=n.length,s=e+"=";for(;r<i;r++){t=n[r];while(t.charAt(0)==" ")t=t.substring(1,t.length);if(t.indexOf(s)==0)return t.substring(s.length,t.length)}return null}function O(e){L(e,"",-1)}function M(){var e=document.styleSheets[0];try{e.addRule(".xxxxxx","position: relative");e.removeRule(e.rules.length-1)}catch(t){}}var t={id:"grid",modifierKey:null,showGridKey:"g",holdGridKey:"h",foregroundKey:"f",jumpGridsKey:"j",numberOfGrids:1,classPrefix:"grid-",cookiePrefix:"hashgrid"},n=1,r,i,s,o,u,a,f,l,c,h=!1,p,d="B",v=-1,m=9999,g,y,b,w=!1,E;if(typeof e=="object")for(y in e)t[y]=e[y];else typeof e=="string"&&(t.id=e);$("#"+t.id).length>0&&$("#"+t.id).remove();c=$("<div></div>");c.attr("id",t.id).css({display:"none","pointer-events":"none"});$("body").prepend(c);f=$("#"+t.id);f.css("z-index")=="auto"&&f.css("z-index",v);g=parseFloat($(document).height());f.height(g);f.append('<div id="'+t.id+'-horiz" class="horiz first-line">');E=f.css("top");f.css({top:"-999px",display:"block"});o=$("#"+t.id+"-horiz");u=o.outerHeight();f.css({display:"none",top:E});if(u<=0)return!1;a=Math.floor(g/u);r="";for(s=a-1;s>=1;s--)r+='<div class="horiz"></div>';f.append(r);f.append($('<div class="vert-container"></div>'));p=f.children(".vert-container");i=f.width();p.css({width:i,position:"absolute",top:0});p.append('<div class="vert first-line">&nbsp;</div>');r="";for(s=0;s<30;s++)r+='<div class="vert">&nbsp;</div>';p.append(r);p.children().height(g).css({display:"inline-block"});l=A(t.cookiePrefix+t.id);if(typeof l=="string"){b=l.split("-");b[2]=Number(b[2]);if(typeof b[2]=="number"&&!isNaN(b[2])){n=b[2].toFixed(0);f.addClass(t.classPrefix+n)}if(b[1]=="F"){d="F";f.css("z-index",m)}if(b[0]=="1"){h=!0;w=!0;N()}}else f.addClass(t.classPrefix+n);$(document).bind("keydown",C);$(document).bind("keyup",k);return{}};$(document).ready(function(){var e=new hashgrid({numberOfGrids:2})});window.log=function(){log.history=log.history||[];log.history.push(arguments);if(this.console){var t=arguments,n;t.callee=t.callee.caller;n=[].slice.call(t);typeof console.log=="object"?log.apply.call(console.log,console,n):console.log.apply(console,n)}};(function(e){function t(){}for(var n="assert,count,debug,dir,dirxml,error,exception,group,groupCollapsed,groupEnd,info,log,markTimeline,profile,profileEnd,time,timeEnd,trace,warn".split(","),r;!!(r=n.pop());)e[r]=e[r]||t})(function(){try{console.log();return window.console}catch(e){return window.console={}}}());